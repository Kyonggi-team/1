<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>FAQ 챗봇</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Jua&display=swap');
        body {
            background-image: url('/assets/image/background.png');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            font-family: 'Jua', sans-serif;
            margin: 0;
            background-color: #f4f4f4;
        }

        /*나브바_햄버거 버전*/
        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: fixed; /*스크롤을 내려도 header는 따라옴*/
            top: 0;
            width: 100%;
            padding: 15px 20px; 
            box-sizing: border-box;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); /* 그림자 추가로 입체감 부여 */
            height: 60px;
            z-index: 1000; /* 다른 요소보다 항상 위에 보이도록 설정 */
        }

        .brand_logo img{
            height: 50px;
        }

        .menu {
            font-size: 15px;
            display: flex;
            gap: 15px;
        }
        .menu a {
            text-decoration: none;
            color: #007BFF; 
            font-weight: bold; 
            transition: color 0.3s; 
        }
        .menu a:hover {
            color: #0056b3;
            transform: translateY(-2px); 
        }

        .hamburger_logo {
            /* display: none; */
            font-size: 30px;
            cursor: pointer;
            color: #007BFF;
        }

        .sidebar {
            height: 100%;
            width: 0;
            position: fixed;
            top: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            overflow-x: hidden;
            transition: 0.5s;
            padding-top: 60px;
            z-index: 1000;
        }
        .sidebar a {
            padding: 8px;
            padding-left: 32px;
            text-decoration: none;
            font-size: 20px;
            color: #007BFF;
            display: block;
            transition: 0.3s;
            transition: color 0.3s ; 
        }
        .sidebar a:hover {
            /* background-color: rgb(255, 177, 32); */
            border-bottom: white solid 3px;
            transition: 0s;
            color: #0056b3;
            transform: translateY(-2px); 
        }

        .sidebar .closebtn:hover {
            background: none;
            border-bottom: none;
            transition: 0s;
        }

        .sidebar .closebtn {
            position: absolute;
            top: 10px;
            padding: 0;
            left: 10px;
            font-size: 36px;
        }

        .chat-container {
            display: flex;
            flex-direction: column;
            max-width: 600px;
            margin: 0 auto;
            border: 1px solid #ccc;
            border-radius: 5px;
            /* background-color: #ffffff; */
            height: 80vh;
            margin-bottom: 40px;
            margin-top: 100px;
            
        }

        .header {
            background-color: #68c490;
            color: white;
            padding: 10px;
            text-align: center;
            font-size: 1.5em;
            font-weight: bold;
            border-bottom: 1px solid #ccc;
            position: relative;
        }

        .messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            background: rgba(255, 255, 255, 0.8); /* 투명도 적용된 배경색 */;
        }

        .message-container {
            display: flex;
            margin-bottom: 10px;
        }

        .message-container.user {
            justify-content: flex-end;
        }

        .message-container.assistant {
            justify-content: flex-start;
        }

        .message {
            padding: 10px;
            border-radius: 20px;
            display: inline-block;
            word-wrap: break-word;
            max-width: 70%;
        }

        .message.user {
            background-color: #007BFF;
            color: white;
            text-align: left;
            border-top-right-radius: 3px;
        }

        .message.assistant {
            background-color: #ffffff;
            color: black;
            text-align: left;
            border: 1px solid #ccc;
            border-top-left-radius: 3px;
        }

        .input-container {
            max-width: 600px;
            display: flex;
            border-top: 1px solid #ccc;
            padding: 10px;
            background-color: #fff;
        }
        

        input[type="text"] {
            flex: 1;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px 0 0 5px;
        }

        button {
            padding: 10px;
            border: 1px solid #ccc;
            border-left: none;
            background-color: #007BFF;
            color: white;
            border-radius: 0 5px 5px 0;
            cursor: pointer;
        }

        button:hover {
            background-color: #0056b3;
        }
        .header .close-btn { /* 수정 */
            position: absolute;
            left: 15px;
            top: 10px;
            background: none;
            border: none;
            color: white;
            font-size: 1.2em;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="navbar">
        <!--&#9776 햄버거 메뉴-->
        <div class="brand_logo"><a href="#"><img src="/assets/image/Logo.png" alt="Byte the Blues"></a></div>
        <span class="hamburger_logo" onclick="openNav()">&#9776;</span>
    </div>
    
    <!--가로 600px미만-->
    <div id="sidebar" class="sidebar">
        <!--&times 닫기 버튼-->
        <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
        <a href="/logout">로그아웃</a>
        <a href="/">홈으로</a>
        <a href="/myPage">마이페이지</a>
        <a href="/aiDiary">AI다이어리</a>
        <a href="/memo">메모</a>
        <a href="/survey">Survey</a>
    </div>
<div class="chat-container">
    <div class="header">
        <a class="close-btn" onclick="window.location.href='/'" positon = absolute>X</a> <!-- 추가 -->
        FAQ 챗봇
    </div>
    <div class="messages" id="messageContainer">
        <div th:each="message : ${messages}">
            <div th:if="${message.sender == 'user'}" class="message-container user">
                <div class="message user">
                    <span th:text="${message.message}"></span>
                </div>
            </div>
            <div th:if="${message.sender == 'assistant'}" class="message-container assistant">
                <div class="message assistant">
                    <span th:text="${message.message}"></span>
                </div>
            </div>
        </div>
    </div>
    <div class="input-container">
        <form th:action="@{/chat/message}" method="post">
            <input type="text" name="message" placeholder="Type your message here..." required>
            <input type="hidden" name="role" value="The conversation will be in Korean, and you will find out what the user experienced today through randomly generated questions. Example 1) 'How did you feel when you woke up this morning?' Example 2) 'Did you enjoy your meal today?'">
            <input type="hidden" name="date" th:value="${chatDate}">
            <input type="hidden" name="memberId" th:value="${memberId}">
            <button type="submit">전송</button>
        </form>
    </div>
</div>
</body>
<script>
    // Scroll to the bottom of the message container when the page loads
    window.onload = function() {
        var messageContainer = document.getElementById('messageContainer');
        messageContainer.scrollTop = messageContainer.scrollHeight;
    };

    function openNav() {
        document.getElementById("sidebar").style.width = "200px";
    }

    function closeNav() {
        document.getElementById("sidebar").style.width = "0";
    }
</script>
</html>
